{"version":3,"sources":["../../src/controllers/user.controller.ts"],"sourcesContent":["import { Request, Response } from 'express';\r\nimport { Controller, Get, Post, Put } from '~/decorators';\r\nimport { permission } from '~/middlewares/permission';\r\nimport UserRepository from '~/repositories/user.repository';\r\nimport { Roles } from '~/types/roles';\r\nimport OkResponse from '~/utils/response/response';\r\n\r\n@Controller('/users')\r\nclass UserController {\r\n   userRepo = new UserRepository();\r\n\r\n   @Get('/', permission(Roles.ADMIN))\r\n   async getAllUsers(req: Request, res: Response) {\r\n      const { page, limit = 20, filter = '' } = req.query;\r\n      const { result, pagination } = await this.userRepo.getAllUser({ page, limit, filter });\r\n      return OkResponse(res, { metadata: result, pagination });\r\n   }\r\n\r\n   @Put('/', permission())\r\n   async updateUser(req: Request, res: Response) {\r\n      const { _id, fullname, phone, address, image, role } = req.body;\r\n      const result = await this.userRepo.updateUser({\r\n         _id,\r\n         fullname,\r\n         phone,\r\n         address,\r\n         image,\r\n         role\r\n      });\r\n      return OkResponse(res, { metadata: result });\r\n   }\r\n}\r\n\r\nexport default UserController;\r\n"],"names":["UserController","getAllUsers","req","res","page","limit","filter","query","result","pagination","userRepo","getAllUser","OkResponse","metadata","updateUser","_id","fullname","phone","address","image","role","body","UserRepository","Get","permission","Roles","ADMIN","Put","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiCA;;;eAAA;;;yBAjCkC;4BACS;4BAChB;yDACA;uBACL;mDACC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvB,IAAA,AACMA,iBADN,MACMA;IAGH,MACMC,YAAYC,GAAY,EAAEC,GAAa,EAAE;QAC5C,MAAM,EAAEC,IAAI,EAAEC,QAAQ,EAAE,EAAEC,SAAS,EAAE,EAAE,GAAGJ,IAAIK,KAAK;QACnD,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAE,GAAG,MAAM,IAAI,CAACC,QAAQ,CAACC,UAAU,CAAC;YAAEP;YAAMC;YAAOC;QAAO;QACpF,OAAOM,IAAAA,iBAAU,EAACT,KAAK;YAAEU,UAAUL;YAAQC;QAAW;IACzD;IAEA,MACMK,WAAWZ,GAAY,EAAEC,GAAa,EAAE;QAC3C,MAAM,EAAEY,GAAG,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,OAAO,EAAEC,KAAK,EAAEC,IAAI,EAAE,GAAGlB,IAAImB,IAAI;QAC/D,MAAMb,SAAS,MAAM,IAAI,CAACE,QAAQ,CAACI,UAAU,CAAC;YAC3CC;YACAC;YACAC;YACAC;YACAC;YACAC;QACH;QACA,OAAOR,IAAAA,iBAAU,EAACT,KAAK;YAAEU,UAAUL;QAAO;IAC7C;;QArBAE,uBAAAA,YAAW,IAAIY,uBAAc;;AAsBhC;;IApBIC,IAAAA,eAAG,EAAC,KAAKC,IAAAA,sBAAU,EAACC,YAAK,CAACC,KAAK;;;eACT,gBAAO,4BAAP,gBAAO;eAAO,iBAAQ,4BAAR,iBAAQ;;;GAJ1C1B;;IAUF2B,IAAAA,eAAG,EAAC,KAAKH,IAAAA,sBAAU;;;eACE,gBAAO,4BAAP,gBAAO;eAAO,iBAAQ,4BAAR,iBAAQ;;;GAXzCxB;AAAAA;IADL4B,IAAAA,sBAAU,EAAC;GACN5B;MAyBN,WAAeA"}