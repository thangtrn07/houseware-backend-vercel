{"version":3,"sources":["../../src/controllers/home.controller.ts"],"sourcesContent":["import { Request, Response } from 'express';\r\nimport { Controller, Get, Post } from '~/decorators';\r\nimport AuthRepository from '~/repositories/auth.repository';\r\nimport CategoryRepository from '~/repositories/category.repository';\r\nimport ProductRepository from '~/repositories/product.repository';\r\nimport OkResponse from '~/utils/response/response';\r\n\r\n@Controller('/home')\r\nclass HomeController {\r\n   productRepo = new ProductRepository();\r\n   categoryRepo = new CategoryRepository();\r\n\r\n   @Get('/')\r\n   async getHome(req: Request, res: Response) {\r\n      const [categoriesResponse, newProductsResponse, populateProductsResponse] = await Promise.all(\r\n         [\r\n            this.categoryRepo.getAllCategory({ page: 1, limit: 10, filter: '' }),\r\n            this.productRepo.searchProduct({ page: 1, limit: 20, sort: 'createdAt' }),\r\n            this.productRepo.searchProduct({ page: 1, limit: 20, sort: 'populate' })\r\n         ]\r\n      );\r\n\r\n      return OkResponse(res, {\r\n         metadata: {\r\n            categories: categoriesResponse?.result || [],\r\n            newProducts: newProductsResponse?.result || [],\r\n            populateProducts: populateProductsResponse?.result || []\r\n         }\r\n      });\r\n   }\r\n}\r\n\r\nexport default HomeController;\r\n"],"names":["HomeController","getHome","req","res","categoriesResponse","newProductsResponse","populateProductsResponse","Promise","all","categoryRepo","getAllCategory","page","limit","filter","productRepo","searchProduct","sort","OkResponse","metadata","categories","result","newProducts","populateProducts","ProductRepository","CategoryRepository","Get","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAgCA;;;eAAA;;;yBAhCkC;4BACI;6DAEP;4DACD;mDACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvB,IAAA,AACMA,iBADN,MACMA;IAIH,MACMC,QAAQC,GAAY,EAAEC,GAAa,EAAE;QACxC,MAAM,CAACC,oBAAoBC,qBAAqBC,yBAAyB,GAAG,MAAMC,QAAQC,GAAG,CAC1F;YACG,IAAI,CAACC,YAAY,CAACC,cAAc,CAAC;gBAAEC,MAAM;gBAAGC,OAAO;gBAAIC,QAAQ;YAAG;YAClE,IAAI,CAACC,WAAW,CAACC,aAAa,CAAC;gBAAEJ,MAAM;gBAAGC,OAAO;gBAAII,MAAM;YAAY;YACvE,IAAI,CAACF,WAAW,CAACC,aAAa,CAAC;gBAAEJ,MAAM;gBAAGC,OAAO;gBAAII,MAAM;YAAW;SACxE;QAGJ,OAAOC,IAAAA,iBAAU,EAACd,KAAK;YACpBe,UAAU;gBACPC,YAAYf,CAAAA,+BAAAA,yCAAAA,mBAAoBgB,MAAM,KAAI,EAAE;gBAC5CC,aAAahB,CAAAA,gCAAAA,0CAAAA,oBAAqBe,MAAM,KAAI,EAAE;gBAC9CE,kBAAkBhB,CAAAA,qCAAAA,+CAAAA,yBAA0Bc,MAAM,KAAI,EAAE;YAC3D;QACH;IACH;;QApBAN,uBAAAA,eAAc,IAAIS,0BAAiB;QACnCd,uBAAAA,gBAAe,IAAIe,2BAAkB;;AAoBxC;;IAlBIC,IAAAA,eAAG,EAAC;;;eACc,gBAAO,4BAAP,gBAAO;eAAO,iBAAQ,4BAAR,iBAAQ;;;GALtCzB;AAAAA;IADL0B,IAAAA,sBAAU,EAAC;GACN1B;MAwBN,WAAeA"}