{"version":3,"sources":["../../src/controllers/upload.controller.ts"],"sourcesContent":["import { Request, Response } from 'express';\r\nimport { Controller, Post } from '~/decorators';\r\nimport uploader from '~/middlewares/uploader';\r\nimport ImageRepository from '~/repositories/image.repository';\r\nimport { CloudImage } from '~/types/image';\r\nimport OkResponse from '~/utils/response/response';\r\n\r\n@Controller('/upload')\r\nclass UploadController {\r\n   private imageRepo = new ImageRepository();\r\n   @Post('/', uploader.single('image'))\r\n   async uploadImage(req: Request, res: Response) {\r\n      const image: CloudImage = req.file;\r\n\r\n      const imageResult = await this.imageRepo.createImage(image);\r\n      return OkResponse(res, { metadata: imageResult });\r\n   }\r\n}\r\n\r\nexport default UploadController;\r\n"],"names":["UploadController","uploadImage","req","res","image","file","imageResult","imageRepo","createImage","OkResponse","metadata","ImageRepository","Post","uploader","single","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAmBA;;;eAAA;;;yBAnBkC;4BACD;mDACZ;0DACO;mDAEL;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvB,IAAA,AACMA,mBADN,MACMA;IAEH,MACMC,YAAYC,GAAY,EAAEC,GAAa,EAAE;QAC5C,MAAMC,QAAoBF,IAAIG,IAAI;QAElC,MAAMC,cAAc,MAAM,IAAI,CAACC,SAAS,CAACC,WAAW,CAACJ;QACrD,OAAOK,IAAAA,iBAAU,EAACN,KAAK;YAAEO,UAAUJ;QAAY;IAClD;;QAPA,uBAAQC,aAAY,IAAII,wBAAe;;AAQ1C;;IAPIC,IAAAA,gBAAI,EAAC,KAAKC,iBAAQ,CAACC,MAAM,CAAC;;;eACJ,gBAAO,4BAAP,gBAAO;eAAO,iBAAQ,4BAAR,iBAAQ;;;GAH1Cd;AAAAA;IADLe,IAAAA,sBAAU,EAAC;GACNf;MAWN,WAAeA"}