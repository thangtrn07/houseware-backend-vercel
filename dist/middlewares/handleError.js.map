{"version":3,"sources":["../../src/middlewares/handleError.ts"],"sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport { ErrorException, NotFoundException } from '~/utils/response';\r\nimport { StatusCodes, ReasonPhrases } from 'http-status-codes';\r\nimport { format } from 'date-fns';\r\n\r\nexport class handleError {\r\n   static NotFound = (req: Request, res: Response, next: NextFunction) => {\r\n      next(new NotFoundException(`[${req.method}] Not found resource: ${req.url}`));\r\n   };\r\n\r\n   static InternalServer = (\r\n      err: ErrorException,\r\n      req: Request,\r\n      res: Response,\r\n      next: NextFunction\r\n   ) => {\r\n      console.log('--- ERROR EXCEPTION---');\r\n      console.table([\r\n         {\r\n            Name: err?.name,\r\n            'Status code': err?.statusCode || StatusCodes.INTERNAL_SERVER_ERROR,\r\n            Time: format(new Date(), 'hh:mm:ss dd/MM/yyyy'),\r\n            Message: err?.message\r\n         }\r\n      ]);\r\n\r\n      res.status(err.statusCode || StatusCodes.INTERNAL_SERVER_ERROR).json({\r\n         statusCode: err.statusCode || StatusCodes.INTERNAL_SERVER_ERROR,\r\n         message: err.message || ReasonPhrases.INTERNAL_SERVER_ERROR\r\n      });\r\n   };\r\n}\r\n"],"names":["handleError","NotFound","req","res","next","NotFoundException","method","url","InternalServer","err","console","log","table","Name","name","statusCode","StatusCodes","INTERNAL_SERVER_ERROR","Time","format","Date","Message","message","status","json","ReasonPhrases"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKaA;;;eAAAA;;;0BAJqC;iCACP;yBACpB;;;;;;;;;;;;;;AAEhB,IAAA,AAAMA,cAAN,MAAMA;AA0Bb;AAzBG,iBADUA,aACHC,YAAW,CAACC,KAAcC,KAAeC;IAC7CA,KAAK,IAAIC,2BAAiB,CAAC,CAAC,CAAC,EAAEH,IAAII,MAAM,CAAC,sBAAsB,EAAEJ,IAAIK,GAAG,CAAC,CAAC;AAC9E;AAEA,iBALUP,aAKHQ,kBAAiB,CACrBC,KACAP,KACAC,KACAC;IAEAM,QAAQC,GAAG,CAAC;IACZD,QAAQE,KAAK,CAAC;QACX;YACGC,IAAI,EAAEJ,gBAAAA,0BAAAA,IAAKK,IAAI;YACf,eAAeL,CAAAA,gBAAAA,0BAAAA,IAAKM,UAAU,KAAIC,4BAAW,CAACC,qBAAqB;YACnEC,MAAMC,IAAAA,eAAM,EAAC,IAAIC,QAAQ;YACzBC,OAAO,EAAEZ,gBAAAA,0BAAAA,IAAKa,OAAO;QACxB;KACF;IAEDnB,IAAIoB,MAAM,CAACd,IAAIM,UAAU,IAAIC,4BAAW,CAACC,qBAAqB,EAAEO,IAAI,CAAC;QAClET,YAAYN,IAAIM,UAAU,IAAIC,4BAAW,CAACC,qBAAqB;QAC/DK,SAASb,IAAIa,OAAO,IAAIG,8BAAa,CAACR,qBAAqB;IAC9D;AACH"}